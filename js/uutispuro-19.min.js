"use strict";var ws;var newsIntervalId;var connectionIntervalId;var connectionRetryCounter=0;function retryOpeningWebSocket(){connectionIntervalId=setInterval(function(){if(connectionRetryCounter==2){location.reload(true)}connectionRetryCounter+=1;openWebSocket();if(ws!=undefined&&ws.readyState===ws.OPEN){clearInterval(connectionIntervalId)}},1100)}function url(){var a=window.location;return((a.protocol==="https:")?"wss://":"ws://")+a.hostname+(((a.port!=80)&&(a.port!=443))?":"+a.port:"")+"/websocket"+a.pathname}function openWebSocket(){if("WebSocket" in window){if(ws==undefined||ws==null){ws=new WebSocket(url())}ws.onmessage=function(a){var b=JSON.parse(a.data);addItemsToDom(b.d.Items,b.d.Lang)};ws.onclose=function(a){clearInterval(newsIntervalId);retryOpeningWebSocket()};ws.onopen=function(a){clearInterval(connectionIntervalId);ws.send("ping");news()};ws.onerror=function(a){}}else{if(!("WebSocket" in window)){alert("WebSocket NOT supported by your Browser! Please change to a modern browser.")}}}function news(){newsIntervalId=setInterval(function(){if(ws!=undefined&&ws.readyState===ws.OPEN){ws.send("ping")}},20000)}var NewsItems=React.createClass({displayName:"NewsItems",handleClick:function(b,a){if(ws!=undefined&&ws.readyState===ws.OPEN&&b!=undefined){if(a&&document.getElementById(b).getElementsByClassName("like").length>0){ws.send("l/"+b);document.getElementById(b).getElementsByClassName("like")[0].innerHTML=(+document.getElementById(b).getElementsByClassName("like")[0].innerHTML+1);document.getElementById(b).getElementsByClassName("like")[0].className="boldlike"}else{if(document.getElementById(b).getElementsByClassName("unlike").length>0){ws.send("u/"+b);document.getElementById(b).getElementsByClassName("unlike")[0].innerHTML=(+document.getElementById(b).getElementsByClassName("unlike")[0].innerHTML+1);document.getElementById(b).getElementsByClassName("unlike")[0].className="boldunlike"}}}},render:function(){var a="";var b=this.props.lang;return(React.createElement("div",null,this.props.rssItems.map(function(d){if(d.Enclosure.Url!=""){a=React.createElement("img",{className:"imgsize",onerror:'this.src=\\"\\"',src:d.Enclosure.Url})}else{a=""}var c=(d.Source==="Turun Sanomat"||d.Source==="Telegraph")?"":"black";return React.createElement("ul",{key:d.id},React.createElement("li",{className:"first"},React.createElement("div",{className:"img "+c},a)),React.createElement("li",{className:"second"},React.createElement("div",{className:"source"},d.Source),React.createElement("div",{className:"category "+d.Category.StyleName},React.createElement("a",{href:"/"+window.location.pathname.split("/")[1]+"/category/"+d.Category.Name},categoryName(b,d.Category.Name))),React.createElement("div",{className:"date"},moment(d.Date).format("DD.MM. HH:mm")),React.createElement("div",{className:"social",id:d.id},React.createElement("span",{className:"like",onClick:this.handleClick.bind(this,d.id,true)},d.Likes),React.createElement("span",{className:"unlike",onClick:this.handleClick.bind(this,d.id,false)},d.Unlikes)),React.createElement("div",{className:"link"},React.createElement("a",{id:d.id,target:"_blank",href:d.Link},d.Title))))},this)))}});function addItemsToDom(a,b){React.render(React.createElement(NewsItems,{rssItems:a,lang:b}),document.getElementById("news-container"))}function categoryName(b,a){if(b===2){if(a==="Digi"){return"Tech"}else{if(a==="Elokuvat"){return"Movies"}else{if(a==="Koti"){return"Home"}else{if(a==="Kotimaa"){return"Domestic"}else{if(a==="Kulttuuri"){return"Culture"}else{if(a==="Matkustus"){return"Travel"}else{if(a==="Pelit"){return"Games"}else{if(a==="Ruoka"){return"Food"}else{if(a==="Talous"){return"Economy"}else{if(a==="Terveys"){return"Health"}else{if(a==="Tiede"){return"Science"}else{if(a==="Ulkomaat"){return"Foreign"}else{if(a==="Urheilu"){return"Sports"}else{if(a==="Viihde"){return"Entertainment"}else{if(a==="Blogit"){return"Blogs"}else{if(a==="Naiset"){return"Women"}}}}}}}}}}}}}}}}}else{if(b==="/sv/"){}else{return a}}}document.addEventListener("DOMContentLoaded",function(){openWebSocket()});(function(d,e,j,h,f,c,b){d.GoogleAnalyticsObject=f;d[f]=d[f]||function(){(d[f].q=d[f].q||[]).push(arguments)},d[f].l=1*new Date();c=e.createElement(j),b=e.getElementsByTagName(j)[0];c.async=1;c.src=h;b.parentNode.insertBefore(c,b)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-2171875-4","auto");ga("send","pageview");